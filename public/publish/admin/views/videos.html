<div class="pu-videos">
  <h2 ng-bind="'VIDEOS.TITLE' | translate"></h2>
  <p class="ng-hide" ng-show="!videos.length" ng-bind="'VIDEOS.NO_VIDEO' | translate"></p>

  <div class="ng-hide" ng-show="videos.length">

    <div class="header even line">
      <div class="col-xs-12 col-sm-4"><strong ng-bind="'VIDEOS.NAME_COLUMN' | translate"></strong></div>
      <div class="col-xs-2 hidden-xs"><strong ng-bind="'VIDEOS.DATE_COLUMN' | translate"></strong></div>
      <div class="col-xs-2 hidden-xs"><strong ng-bind="'VIDEOS.CATEGORY_COLUMN' | translate"></strong></div>
      <div class="col-xs-2 hidden-xs"><strong ng-bind="'VIDEOS.STATUS_COLUMN' | translate"></strong></div>
      <div class="col-xs-2 hidden-xs"><strong ng-bind="'VIDEOS.ACTIONS_COLUMN' | translate"></strong></div>
    </div>

    <div class="line" ng-repeat="video in videos"  ng-class-odd="'odd'" ng-class-even="'even'" >
      <div class="col-xs-12 col-sm-4" ng-click="toggleVideoDetails(video)">
        <span ng-if="video.status" class="glyphicon" aria-hidden="true" ng-class="{'glyphicon-chevron-right' : !video.opened, 'glyphicon-chevron-down' : video.opened}"></span> <strong>[[video.title || video.id]]</strong></div>
      <div class="col-xs-2 hidden-xs"><span ng-if="video.metadata.date">[[video.metadata.date * 1000 | date:'yyyy-MM-dd']]</span></div>
      <div class="col-xs-2 hidden-xs"><span ng-if="video.category">[[video.category]]</span></div>
      <div class="col-xs-2 hidden-xs"><span class="label" ng-class="{'label-success': (video.status === 1 && video.state === 7), 'label-info' : video.status === 2, 'label-danger' : !video.status, 'label-warning' : (video.state === 6 && video.status === 1)}">[['VIDEOS.STATE_' + video.state | translate]] <span ng-if="!video.status">([[video.errorCode]])</span></div>
      <div class="col-xs-2 hidden-xs">
        <div class="btn-group actions dropdown" dropdown>
          <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle ng-disabled="disabled">
            <span ng-bind="'VIDEOS.ACTIONS_COLUMN' | translate" ></span> <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li role="presentation" ng-if="video.state === 7"><a href="[[video.link]]"  target="_blank"  ng-bind="'VIDEOS.VIEW' | translate"></a></li>
            <li role="presentation" ng-if="video.state === 6"><a role="menuitem" href="#" ng-click="publishVideo(video)" ng-bind="'VIDEOS.PUBLISH' | translate"></a></li>
            <li role="presentation" ng-if="video.state === 7"><a role="menuitem" href="#" ng-click="unpublishVideo(video)" ng-bind="'VIDEOS.UNPUBLISH' | translate"></a></li>            
            <li ng-if="video.state == 7 || video.state == 6 " class="divider"></li>
            <li role="presentation" ng-if="video.state >= 6"><a role="menuitem" href="#" ng-click="removeVideo(video)" ng-bind="'VIDEOS.REMOVE' | translate"></a></li>
          </ul>
        </div>
      </div>
      <div ng-if="video.opened">
        <div class="pu-detail">

          <form class="form-horizontal" ov-form name="videoForm" ng-submit="videoForm.$valid && saveVideo(videoForm, video)" novalidate>
            <ul>

              <li class="form-inline">
                <div class="form-group">
                  <label class="strong control-label"><span ng-bind="'VIDEOS.ATTR_TITLE' | translate"></span> : </label>
                  <ov-editable ov-name="title" ov-value="video.title" ov-type="text" ov-required="true" ov-disabled="videoForm.saving" ng-class="{'has-error': videoForm.title.$invalid && videoForm.$submitted}">     
                  </ov-editable>
                </div>
              </li>

              <li class="form-inline">
                <div class="form-group">
                   <label class="strong control-label"><span ng-bind="'VIDEOS.ATTR_DESCRIPTION' | translate"> : </span></label>
                  <ov-editable ov-name="description" ov-value="video.description" ov-type="text" ov-required="true" ov-disabled="videoForm.saving" ng-class="{'has-error': videoForm.description.$invalid && videoForm.$submitted}">     
                  </ov-editable>
                </div>
              </li>

              <li ng-if="property.name" ng-repeat="property in video.properties" class="form-inline" ng-class="{'has-error': videoForm[property.name].$invalid && videoForm.$submitted}">
                <div class="form-group" ng-class="{'has-error': videoForm[property.name].$invalid && videoForm.$submitted}"> 
                  <label class="strong control-label" >[[property.name]]: </label>
                  <ov-editable class=""ov-name="[[property.name]]" ov-value="property.value" ov-type="[[property.type]]" ov-required="true" ov-disabled="videoForm.saving" >
                  </ov-editable>
                </div>
              </li>

            </ul>

            <div class="btn-group" role="group" ng-show="!videoForm.edition">
              <button type="button" ng-click="openEdition(videoForm);" class="btn btn-primary" ng-bind="'VIDEOS.FORM_EDIT' | translate"></button>
            </div>
            <div class="btn-group" role="group" ng-show="videoForm.edition">
              <button type="button" ng-click="cancelEdition(videoForm)" class="btn btn-default" ng-bind="'VIDEOS.FORM_CANCEL' | translate" ng-disabled="video.saving"></button>
              <button ng-show="videoForm.edition" type="submit" class="btn btn-primary" ng-bind="'VIDEOS.FORM_SAVE' | translate" ng-disabled="video.saving"></button>
            </div>
          </form>

        </div>
      </div>
    </div>

  </div>
</div>